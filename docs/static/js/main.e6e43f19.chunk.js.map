{"version":3,"sources":["settings.js","utils.js","components/ChartTitle.js","components/ChartTypeSelector.js","App.js","reportWebVitals.js","index.js"],"names":["settings","color","lineWidth","isStroke","text","radius","isFill","latlonline","lines","lon","lat","push","start","end","properties","type","name","Math","abs","modifyChartGeojson","geojson","addFeatures","deleteFeatures","features","feature","pressure","value","i","geometry","coordinates","length","filter","line","parseInt","even","odd","center","includes","createChartTexts","chart","texts","title","offset","ChartTitle","props","className","code","moment","basetime","format","validtime","ChartTypeSelector","React","useState","Object","keys","types","setType","items","map","key","MenuItem","FormControl","InputLabel","id","Select","labelId","onChange","e","target","handleChangeType","INITIAL_VIEW_STATE","longitude","latitude","zoom","chartTypes","App","setChart","chartType","setChartType","useEffect","a","LATEST_URL","fetch","then","res","JSON","parse","latest","url","catch","err","console","error","chartLayers","data","stroked","d","filled","getFillColor","getLineColor","pointRadiusUnits","pointRadiusScale","getRadius","lineWidthUnits","lineWidthScale","getLineWidth","parameters","depthTest","cull","getPolygonOffset","layerIndex","characterSet","k","x","chartTextLayers","getAlignmentBaseline","getAngle","getPosition","getSize","getText","getTextAnchor","sizeScale","getColor","getPixelOffset","handleChangeChartType","chartTitle","initialViewState","controller","getSourcePosition","getTargetPosition","getWidth","getPolygon","width","reportWebVitals","onPerfEntry","Function","getCLS","getFID","getFCP","getLCP","getTTFB","ReactDOM","render","StrictMode","document","getElementById"],"mappings":"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","file":"static/js/main.e6e43f19.chunk.js","sourcesContent":["\nexport const settings = {\n    '等圧線': { color: [222, 222, 222], lineWidth: 2, isStroke: true },\n    '等圧線（主線）': { color: [222, 222, 222], lineWidth: 4, isStroke: true },\n    '等圧線（補助）': { color: [222, 222, 222], lineWidth: 2, isStroke: true, },\n    '寒冷前線': { color: [64, 64, 255], lineWidth: 4, isStroke: true },\n    '温暖前線': { color: [255, 64, 64], lineWidth: 4, isStroke: true },\n    '停滞前線（奇数）': { color: [255, 64, 64], lineWidth: 4, isStroke: true },\n    '停滞前線（偶数）': { color: [64, 64, 255], lineWidth: 4, isStroke: true },\n    '閉塞前線': { color: [128, 0, 255], lineWidth: 4, isStroke: true },\n    '台風': { text: '台', color: [255, 0, 0], lineWidth: 2, isStroke: true },\n    '高気圧': { text: '高', color: [0, 0, 255], lineWidth: 2, isStroke: true },\n    '低気圧': { text: '低', color: [255, 0, 0], lineWidth: 2, isStroke: true },\n    '熱帯低気圧': { text: '熱', color: [255, 0, 0], lineWidth: 2, isStroke: true },\n    '低圧部': { text: '低', color: [255, 0, 0], lineWidth: 2, isStroke: true },\n    '悪天情報（強風）': { color: [255, 0, 0], radius: 4, isFill: true },\n    '悪天情報（霧）': { color: [255, 255, 0, 32],  isFill: true },\n    '悪天情報（海氷）': { color: [192, 192, 255, 127], isFill: true },\n};\n","import { settings } from './settings'\n\n// LineLayer の緯線経線データ\nexport const latlonline = (() => {\n    const d = 1;  // [°]。精度みたいなもの。\n    const dlon = 10;  // [°]。\n    const dlat = 10;  // [°]。\n    const lines = [];\n\n    // 経線\n    for (let lon = -180; lon < 180; lon += dlon) {\n        for (let lat = -80; lat < 80; lat += d) {\n            lines.push({ start: [lon, lat], end: [lon, lat + d], properties: { type: '経線', name: `${Math.abs(lon)}°${(lon < 0) ? 'W' : 'E'}` } });\n        }\n    }\n\n    // 緯線\n    for (let lat = -80; lat < 90; lat += dlat) {\n        for (let lon = -180; lon < 180; lon += d) {\n            lines.push({ start: [lon, lat], end: [lon + d, lat], properties: { type: '緯線', name: `${Math.abs(lat)}°${(lat < 0) ? 'S' : 'N'}` } });\n        }\n    }\n\n    return lines;\n})();\n\n// レンダリングに必要な情報を補足する。\nexport function modifyChartGeojson(geojson) {\n    const AUXILIARY_ISOBAR_SPACE = 10;  // 等圧線の補助線の破線間隔\n    const STATIONARY_FRONT_SPACE = 20;  // 停滞前線の奇数偶数区間の間隔\n\n    const addFeatures = [];\n    const deleteFeatures = [];\n    for (const feature of geojson.features) {\n        switch (feature.properties.type) {\n            case '等圧線':\n                if ((feature.properties.pressure.value % 20) === 0) {\n                    // 20hPa 毎の主線。元の feature を上書きする。\n                    feature.properties.type = '等圧線（主線）';\n\n                } else if (feature.properties.pressure.value % 4) {\n                    // 補助線。元の feature を破線で上書きする。\n\n                    const lines = [];\n                    for (let i = 0; i < (feature.geometry.coordinates.length - 1); i++) {\n                        lines.push([feature.geometry.coordinates[i], feature.geometry.coordinates[i + 1]]);\n                    }\n\n                    feature.properties.type = '等圧線（補助）';\n                    feature.geometry.type = 'MultiLineString';\n                    feature.geometry.coordinates = lines.filter((line, i) => (parseInt(i / AUXILIARY_ISOBAR_SPACE) % 2 === 0));\n                }\n                break;\n\n            case '停滞前線':\n                {\n                    // 偶数区間と奇数区間を交互に色分けする表現。破線にした feature を生成して追加する。元の'停滞前線'は削除する。\n\n                    const lines = [];\n                    for (let i = 0; i < (feature.geometry.coordinates.length - 1); i++) {\n                        lines.push([feature.geometry.coordinates[i], feature.geometry.coordinates[i + 1]]);\n                    }\n\n                    const even = { ...feature };\n                    const odd = { ...feature };\n                    odd.properties = { ...feature.properties };\n                    even.properties = { ...feature.properties };\n                    odd.geometry = { ...feature.geometry };\n                    even.geometry = { ...feature.geometry };\n                    odd.properties.type = '停滞前線（奇数）';\n                    even.properties.type = '停滞前線（偶数）';\n                    odd.geometry.type = 'MultiLineString';\n                    even.geometry.type = 'MultiLineString';\n                    odd.geometry.coordinates = lines.filter((line, i) => (parseInt(i / STATIONARY_FRONT_SPACE) % 2 === 0));\n                    even.geometry.coordinates = lines.filter((line, i) => (parseInt(i / STATIONARY_FRONT_SPACE) % 2 !== 0));\n\n                    addFeatures.push(odd);\n                    addFeatures.push(even);\n\n                    deleteFeatures.push(feature);\n                }\n                break;\n\n            case '台風':\n            case '低気圧':\n            case '高気圧':\n            case '熱帯低気圧':\n            case '低圧部':\n                {\n                    // 元の中心座標から四方に伸ばした×マークを上書きする。\n                    const radius = 0.5;\n                    const center = feature.geometry.coordinates;\n\n                    const lines = [];\n                    lines.push([center, [center[0] + radius, center[1] + radius]]);\n                    lines.push([center, [center[0] - radius, center[1] + radius]]);\n                    lines.push([center, [center[0] + radius, center[1] - radius]]);\n                    lines.push([center, [center[0] - radius, center[1] - radius]]);\n\n                    feature.geometry.type = 'MultiLineString';\n                    feature.geometry.coordinates = lines;\n                }\n                break;\n        }\n    }\n\n    geojson.features = geojson.features.filter(feature => !deleteFeatures.includes(feature));\n\n    for (const feature of addFeatures) {\n        geojson.features.push(feature);\n    }\n\n    return geojson;\n}\n\nexport function createChartTexts(chart) {\n    const texts = [];\n    for (const feature of chart.features) {\n        switch (feature.properties.type) {\n            case '台風':\n            case '低気圧':\n            case '高気圧':\n            case '熱帯低気圧':\n            case '低圧部':\n                texts.push(\n                    {\n                        title: settings[feature.properties.type].text,\n                        type: feature.properties.type,\n                        coordinates: feature.geometry.coordinates[0],\n                        offset: [20, 20]\n                    });\n                break;\n        }\n    }\n    return texts;\n}\n","import React from 'react';\nimport './ChartTitle.css';\nimport moment from 'moment';\n\nfunction ChartTitle(props) {\n\n  return (\n    <article className='ChartTitle'>\n      <h1>{props.title.title} {props.title.code}（{props.title.type}）</h1>\n      <p>basetime : {moment(props.title.basetime).format()}</p>\n      <p>validtime : {moment(props.title.validtime).format()}</p>\n    </article>\n  );\n}\n\nexport default ChartTitle;\n","import React from 'react';\nimport './ChartTypeSelector.css';\nimport InputLabel from '@material-ui/core/InputLabel';\nimport MenuItem from '@material-ui/core/MenuItem';\nimport FormControl from '@material-ui/core/FormControl';\nimport Select from '@material-ui/core/Select';\n\nfunction ChartTypeSelector(props) {\n  const [type, setType] = React.useState(Object.keys(props.types)[0]);\n\n  const items = Object.keys(props.types).map(key => <MenuItem key={key} value={key}>{key}</MenuItem>);\n\n  const onChange = (e) => {\n    setType(e.target.value);\n    return props.handleChangeType(e.target.value)\n  }\n\n  return (\n    <article className='ChartTypeSelector'>\n      <FormControl >\n        <InputLabel id=\"chartselector-select-label\">jmaxml type</InputLabel>\n        <Select labelId=\"chartselector-select-label\"\n          value={type}\n          onChange={e => onChange(e)} >\n          {items}\n        </Select>\n      </FormControl>\n    </article>\n  );\n}\n\nexport default ChartTypeSelector;\n","import './App.css';\n\nimport React, { useState, useEffect, Fragment } from 'react';\nimport DeckGL from '@deck.gl/react';\nimport { GeoJsonLayer, SolidPolygonLayer, LineLayer, TextLayer } from '@deck.gl/layers';\nimport { _GlobeView as GlobeView } from '@deck.gl/core';\nimport { latlonline, modifyChartGeojson, createChartTexts } from './utils'\nimport { settings } from './settings'\nimport ChartTitle from './components/ChartTitle'\nimport ChartTypeSelector from './components/ChartTypeSelector'\n\n\n\n// Viewport settings\nconst INITIAL_VIEW_STATE = {\n  longitude: 140.0,\n  latitude: 40.0,\n  zoom: 1.2,\n};\n\nconst MAP_URL = 'https://d2ad6b4ur7yvpq.cloudfront.net/naturalearth-3.3.0/ne_50m_land.geojson';\n\nconst chartTypes = {\n  'VZSA50': { name: '地上実況図', code: 'SPAS' },\n  'VZSA60': { name: 'アジア太平洋地上実況図', code: 'ASAS' },\n  'VZSF50': { name: '地上24時間予想図', code: 'FSAS24' },\n  'VZSF60': { name: 'アジア太平洋海上悪天24時間予想図', code: 'FSAS24' },\n  'VZSF51': { name: '地上48時間予想図', code: 'FSAS48' },\n  'VZSF61': { name: 'アジア太平洋海上悪天48時間予想図', code: 'FSAS48' },\n};\n\nfunction App() {\n  const [chart, setChart] = useState(null);\n  const [chartType, setChartType] = useState(Object.keys(chartTypes)[0]);\n\n  useEffect(() => {\n    (async () => {\n\n      const LATEST_URL = `https://jma-xml-api-mrfbzypr4q-an.a.run.app/${chartType}/latest.json`;\n\n      const chart = await fetch(LATEST_URL)\n        .then(res => {\n          return res.text();\n        })\n        .then(text => {\n          return JSON.parse(text);\n        })\n        .then(latest => {\n          return fetch(`https://xml2chart-api-mrfbzypr4q-an.a.run.app/?url=${latest[0].url}`)\n        })\n        .then(res => {\n          return res.text();\n        })\n        .then(text => {\n          return JSON.parse(text);\n        })\n        .then(geojson => {\n          // レンダリングに必要な情報を補足する。\n          geojson = modifyChartGeojson(geojson);\n          const texts = createChartTexts(geojson);\n          const title = { ...geojson.properties, type: chartType, code:chartTypes[chartType].code };\n          return { geojson: geojson, texts: texts, title: title };\n        })\n        .catch((err) => {\n          console.error(`${err}`);\n        });\n\n      setChart(chart);\n    })();\n  }, [chartType]);\n\n  const chartLayers = chart && (\n    <GeoJsonLayer id={`chart-shape-layer`}\n      data={chart.geojson}\n\n      stroked={d => settings[d.properties.type].isStroke ? settings[d.properties.type].isStroke : false}\n      filled={d => settings[d.properties.type].isFill ? settings[d.properties.type].isFill : false}\n\n      getFillColor={d => settings[d.properties.type].color}\n      getLineColor={d => settings[d.properties.type].color}\n\n      pointRadiusUnits={'pixels'}\n      pointRadiusScale={1}\n      getRadius={d => settings[d.properties.type].radius ? settings[d.properties.type].radius : 0}\n\n      lineWidthUnits={'pixels'}\n      lineWidthScale={1}\n      getLineWidth={d => settings[d.properties.type].lineWidth ? settings[d.properties.type].lineWidth : 0}\n\n      parameters={{ depthTest: true, cull: true }}\n      getPolygonOffset={({ layerIndex }) => [0, -20000]}\n    />\n  );\n\n\n  const characterSet = Object.keys(settings).map(k => settings[k]).filter(x => x.text).map(x => x.text);\n  const chartTextLayers = chart && (\n    <TextLayer id={`chart-text-layer`}\n      data={chart.texts}\n      getAlignmentBaseline={'center'}\n      getAngle={0}\n      getPosition={d => d.coordinates}\n      getSize={32}\n      getText={d => d.title}\n      characterSet={characterSet}\n      getTextAnchor={'middle'}\n      sizeScale={1}\n      getColor={d => settings[d.type].color}\n      getPixelOffset={[20, 20]}\n      getPolygonOffset={({ layerIndex }) => [0, -90000]}\n    />\n  );\n\n  const handleChangeChartType = async (type) => {\n    setChartType(type);\n  };\n\n  const chartTitle = chart && (<ChartTitle title={chart.title} />);\n\n  return (\n    <Fragment>\n      {chartTitle}\n      <ChartTypeSelector types={chartTypes} handleChangeType={handleChangeChartType} />\n      <DeckGL\n        initialViewState={INITIAL_VIEW_STATE}\n        controller={true}\n      >\n\n        {chartLayers}\n        {chartTextLayers}\n\n        < LineLayer id='latlon-line-layer'\n          data={latlonline}\n\n          getSourcePosition={d => d.start}\n          getTargetPosition={d => d.end}\n\n          getColor={[127, 127, 127]}\n          getWidth={1}\n\n          getPolygonOffset={({ layerIndex }) => [0, -10000]}\n        />\n\n        <GeoJsonLayer id=\"map-layer\"\n          data={MAP_URL}\n\n          filled={true}\n\n          getFillColor={[64, 64, 64]}\n\n          parameters={{ depthTest: true, cull: true }}\n          getPolygonOffset={({ layerIndex }) => [0, -10000]}\n        />\n\n        <SolidPolygonLayer id='background'\n          data={[[[-180, 90], [0, 90], [180, 90], [180, -90], [0, -90], [-180, -90]]]}\n          getPolygon={d => d}\n\n          filled={true}\n          getFillColor={[32, 32, 32]}\n\n          parameters={{ depthTest: true, cull: true }}\n          getPolygonOffset={({ layerIndex }) => [0, 10000]}\n        />\n\n        <GlobeView id=\"map\" width=\"100%\" controller={true} />\n      </DeckGL>\n    </Fragment>\n  );\n}\n\nexport default App;\n","const reportWebVitals = onPerfEntry => {\n  if (onPerfEntry && onPerfEntry instanceof Function) {\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\n      getCLS(onPerfEntry);\n      getFID(onPerfEntry);\n      getFCP(onPerfEntry);\n      getLCP(onPerfEntry);\n      getTTFB(onPerfEntry);\n    });\n  }\n};\n\nexport default reportWebVitals;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\nimport reportWebVitals from './reportWebVitals';\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n\n// If you want to start measuring performance in your app, pass a function\n// to log results (for example: reportWebVitals(console.log))\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\nreportWebVitals();\n"],"sourceRoot":""}