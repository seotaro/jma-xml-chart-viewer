(this["webpackJsonpjma-xml-chart-viewer"]=this["webpackJsonpjma-xml-chart-viewer"]||[]).push([[0],{148:function(e,t){},184:function(e,t,r){},185:function(e,t,r){},186:function(e,t,r){},189:function(e,t,r){},195:function(e,t){},199:function(e,t,r){"use strict";r.r(t);var n=r(1),o=r.n(n),i=r(32),a=r.n(i),c=(r(184),r(111)),s=r.n(c),l=r(53),u=r(143),p=r(109),f=(r(185),r(247)),d=r(250),h=r(254),g=r(168),y=r(256),j=r(167),b=r(257),m=r(144),O=function(){for(var e=[],t=-180;t<180;t+=10)for(var r=-80;r<80;r+=1)e.push({start:[t,r],end:[t,r+1],properties:{type:"\u7d4c\u7dda",name:"".concat(Math.abs(t),"\xb0").concat(t<0?"W":"E")}});for(var n=-80;n<90;n+=10)for(var o=-180;o<180;o+=1)e.push({start:[o,n],end:[o+1,n],properties:{type:"\u7def\u7dda",name:"".concat(Math.abs(n),"\xb0").concat(n<0?"S":"N")}});return e}();function x(e){var t,r=[],n=Object(m.a)(e.features);try{for(n.s();!(t=n.n()).done;){var o=t.value;switch(o.properties.type){case"\u5bd2\u51b7\u524d\u7dda":case"\u6e29\u6696\u524d\u7dda":case"\u9589\u585e\u524d\u7dda":r.push(o);break;case"\u505c\u6ede\u524d\u7dda":for(var i=[],a=0;a<o.geometry.coordinates.length-1;a++)i.push([o.geometry.coordinates[a],o.geometry.coordinates[a+1]]);var c=Object(l.a)({},o),s=Object(l.a)({},o);s.properties=Object(l.a)({},o.properties),c.properties=Object(l.a)({},o.properties),s.geometry=Object(l.a)({},o.geometry),c.geometry=Object(l.a)({},o.geometry),s.properties.type="\u505c\u6ede\u524d\u7dda\uff08\u5947\u6570\uff09",c.properties.type="\u505c\u6ede\u524d\u7dda\uff08\u5076\u6570\uff09",s.geometry.type="MultiLineString",c.geometry.type="MultiLineString",s.geometry.coordinates=i.filter((function(e,t){return parseInt(t/20)%2===0})),c.geometry.coordinates=i.filter((function(e,t){return parseInt(t/20)%2!==0})),r.push(s),r.push(c)}}}catch(u){n.e(u)}finally{n.f()}return r}function S(e){var t,r=[],n=Object(m.a)(e.features);try{for(n.s();!(t=n.n()).done;){var o=t.value;switch(o.properties.type){case"\u7b49\u5727\u7dda":if(o.properties.pressure.value%20===0){var i=Object(l.a)({},o);i.properties.type="\u7b49\u5727\u7dda\uff08\u4e3b\u7dda\uff09",r.push(i)}else if(o.properties.pressure.value%4){for(var a=[],c=0;c<o.geometry.coordinates.length-1;c++)a.push([o.geometry.coordinates[c],o.geometry.coordinates[c+1]]);var s=Object(l.a)({},o);s.properties.type="\u7b49\u5727\u7dda\uff08\u88dc\u52a9\uff09",s.geometry.type="MultiLineString",s.geometry.coordinates=a.filter((function(e,t){return parseInt(t/10)%2===0})),r.push(s)}else r.push(o)}}}catch(u){n.e(u)}finally{n.f()}return r}function v(e){var t=["\u53f0\u98a8","\u4f4e\u6c17\u5727","\u9ad8\u6c17\u5727","\u71b1\u5e2f\u4f4e\u6c17\u5727","\u4f4e\u5727\u90e8"];return e.features.filter((function(e){return t.includes(e.properties.type)}))}function k(e){var t=["\u60aa\u5929\u60c5\u5831\uff08\u5f37\u98a8\uff09"];return e.features.filter((function(e){return t.includes(e.properties.type)}))}function w(e){var t=["\u60aa\u5929\u60c5\u5831\uff08\u6d77\u6c37\uff09","\u60aa\u5929\u60c5\u5831\uff08\u8239\u4f53\u7740\u6c37\uff09"];return e.features.filter((function(e){return t.includes(e.properties.type)}))}function F(e){var t=["\u60aa\u5929\u60c5\u5831\uff08\u9727\uff09"];return e.features.filter((function(e){return t.includes(e.properties.type)}))}var C={"\u7b49\u5727\u7dda":{color:[222,222,222],lineWidth:2,isStroke:!0},"\u7b49\u5727\u7dda\uff08\u4e3b\u7dda\uff09":{color:[222,222,222],lineWidth:4,isStroke:!0},"\u7b49\u5727\u7dda\uff08\u88dc\u52a9\uff09":{color:[222,222,222],lineWidth:2,isStroke:!0},"\u5bd2\u51b7\u524d\u7dda":{color:[64,64,255],lineWidth:4,isStroke:!0},"\u6e29\u6696\u524d\u7dda":{color:[255,64,64],lineWidth:4,isStroke:!0},"\u505c\u6ede\u524d\u7dda\uff08\u5947\u6570\uff09":{color:[255,64,64],lineWidth:4,isStroke:!0},"\u505c\u6ede\u524d\u7dda\uff08\u5076\u6570\uff09":{color:[64,64,255],lineWidth:4,isStroke:!0},"\u9589\u585e\u524d\u7dda":{color:[128,0,255],lineWidth:4,isStroke:!0},"\u53f0\u98a8":{text:"\u53f0",color:[255,0,0]},"\u9ad8\u6c17\u5727":{text:"\u9ad8",color:[0,0,255]},"\u4f4e\u6c17\u5727":{text:"\u4f4e",color:[255,0,0]},"\u71b1\u5e2f\u4f4e\u6c17\u5727":{text:"\u71b1",color:[255,0,0]},"\u4f4e\u5727\u90e8":{text:"\u4f4e",color:[255,0,0]},"\u60aa\u5929\u60c5\u5831\uff08\u5f37\u98a8\uff09":{color:[127,127,127]},"\u60aa\u5929\u60c5\u5831\uff08\u9727\uff09":{color:[255,255,0,32],isFill:!0},"\u60aa\u5929\u60c5\u5831\uff08\u6d77\u6c37\uff09":{color:[192,192,255,127],isFill:!0},"\u60aa\u5929\u60c5\u5831\uff08\u8239\u4f53\u7740\u6c37\uff09":{color:[255,127,255,127],isFill:!0}},A=(r(186),r(145)),P=r.n(A),I=r(30);var W=function(e){return Object(I.jsxs)("article",{className:"ChartTitle",children:[Object(I.jsxs)("h1",{children:[e.title.title," ",e.title.code,"\uff08",e.title.type,"\uff09"]}),Object(I.jsxs)("p",{children:["basetime : ",P()(e.title.basetime).format()]}),Object(I.jsxs)("p",{children:["validtime : ",P()(e.title.validtime).format()]})]})},T=(r(189),r(258)),M=r(251),z=r(241),L=r(248);var V=function(e){var t=o.a.useState(Object.keys(e.types)[0]),r=Object(p.a)(t,2),n=r[0],i=r[1],a=Object.keys(e.types).map((function(e){return Object(I.jsx)(M.a,{value:e,children:e},e)}));return Object(I.jsx)("article",{className:"ChartTypeSelector",children:Object(I.jsxs)(z.a,{children:[Object(I.jsx)(T.a,{id:"chartselector-select-label",children:"jmaxml type"}),Object(I.jsx)(L.a,{labelId:"chartselector-select-label",value:n,onChange:function(t){return function(t){return i(t.target.value),e.handleChangeType(t.target.value)}(t)},children:a})]})})},Z={longitude:140,latitude:40,zoom:1.2},N={VZSA50:{name:"\u5730\u4e0a\u5b9f\u6cc1\u56f3",code:"SPAS"},VZSA60:{name:"\u30a2\u30b8\u30a2\u592a\u5e73\u6d0b\u5730\u4e0a\u5b9f\u6cc1\u56f3",code:"ASAS"},VZSF50:{name:"\u5730\u4e0a24\u6642\u9593\u4e88\u60f3\u56f3",code:"FSAS24"},VZSF60:{name:"\u30a2\u30b8\u30a2\u592a\u5e73\u6d0b\u6d77\u4e0a\u60aa\u592924\u6642\u9593\u4e88\u60f3\u56f3",code:"FSAS24"},VZSF51:{name:"\u5730\u4e0a48\u6642\u9593\u4e88\u60f3\u56f3",code:"FSAS48"},VZSF61:{name:"\u30a2\u30b8\u30a2\u592a\u5e73\u6d0b\u6d77\u4e0a\u60aa\u592948\u6642\u9593\u4e88\u60f3\u56f3",code:"FSAS48"}};var J=function(){var e=Object(n.useState)(null),t=Object(p.a)(e,2),r=t[0],o=t[1],i=Object(n.useState)(Object.keys(N)[0]),a=Object(p.a)(i,2),c=a[0],m=a[1];Object(n.useEffect)((function(){Object(u.a)(s.a.mark((function e(){var t,r;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t="https://jma-xml-api-mrfbzypr4q-an.a.run.app/".concat(c,"/latest.json"),e.next=3,fetch(t).then((function(e){return e.text()})).then((function(e){return JSON.parse(e)})).then((function(e){return fetch("https://xml2chart-api-mrfbzypr4q-an.a.run.app/?url=".concat(e[0].url))})).then((function(e){return e.text()})).then((function(e){return JSON.parse(e)})).then((function(e){var t=Object(l.a)(Object(l.a)({},e.properties),{},{type:c,code:N[c].code}),r=S(e),n=x(e),o=w(e),i=F(e);return{fronts:n,isobars:r,title:t,windArrows:k(e),centerMarks:v(e),ices:o,fogs:i}})).catch((function(e){console.error("".concat(e))}));case 3:r=e.sent,o(r);case 5:case"end":return e.stop()}}),e)})))()}),[c]);var A=r&&Object(I.jsx)(W,{title:r.title}),P=r&&[{id:"chart-isobar-layer",data:r.isobars},{id:"chart-front-layer",data:r.fronts},{id:"chart-ice-layer",data:r.ices},{id:"chart-fog-layer",data:r.fogs}].map((function(e){return Object(I.jsx)(d.a,{id:e.id,data:e.data,stroked:function(e){return!!C[e.properties.type].isStroke&&C[e.properties.type].isStroke},filled:function(e){return!!C[e.properties.type].isFill&&C[e.properties.type].isFill},getFillColor:function(e){return C[e.properties.type].color},getLineColor:function(e){return C[e.properties.type].color},pointRadiusUnits:"pixels",pointRadiusScale:1,getRadius:function(e){return C[e.properties.type].radius?C[e.properties.type].radius:0},lineWidthUnits:"pixels",lineWidthScale:1,getLineWidth:function(e){return C[e.properties.type].lineWidth?C[e.properties.type].lineWidth:0},parameters:{depthTest:!0,cull:!0},getPolygonOffset:function(e){e.layerIndex;return[0,-2e4]}})})),T=Object.keys(C).map((function(e){return C[e]})).filter((function(e){return e.text})).map((function(e){return e.text})),M=r&&Object(I.jsx)(h.a,{id:"chart-text-layer",data:r.centerMarks,getAlignmentBaseline:"center",getAngle:0,getPosition:function(e){return e.geometry.coordinates},getSize:32,getText:function(e){return C[e.properties.type].text},characterSet:T,getTextAnchor:"middle",sizeScale:1,getColor:function(e){return C[e.properties.type].color},getPixelOffset:[20,20],getPolygonOffset:function(e){e.layerIndex;return[0,-9e4]}}),z=r&&Object(I.jsx)(g.a,{id:"chart-center-mark-layer",data:r.centerMarks,sizeUnits:"pixels",iconAtlas:"chart-center-mark.png",iconMapping:"chart-center-mark.json",getIcon:function(e){return"center"},getPosition:function(e){return e.geometry.coordinates},getSize:function(e){return 20},getColor:function(e){return C[e.properties.type].color},alphaCutoff:.5,billboard:!1,getPolygonOffset:function(e){e.layerIndex;return[0,-1e4]}}),L=r&&Object(I.jsx)(g.a,{id:"chart-wind-arrow-layer",data:r.windArrows,sizeUnits:"pixels",iconAtlas:"chart-wind-arrow.png",iconMapping:"chart-wind-arrow.json",getIcon:function(e){return e.properties.windSpeedKnot.value},getPosition:function(e){return e.geometry.coordinates},getSize:function(e){return 50},getColor:function(e){return C[e.properties.type].color},alphaCutoff:.5,billboard:!1,getAngle:function(e){return 360-e.properties.windDegree.value},getPolygonOffset:function(e){e.layerIndex;return[0,-1e4]}});return Object(I.jsxs)(n.Fragment,{children:[A,Object(I.jsx)(V,{types:N,handleChangeType:function(){var e=Object(u.a)(s.a.mark((function e(t){return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:m(t);case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()}),Object(I.jsxs)(f.a,{initialViewState:Z,controller:!0,children:[z,L,P,M,Object(I.jsx)(y.a,{id:"latlon-line-layer",data:O,getSourcePosition:function(e){return e.start},getTargetPosition:function(e){return e.end},getColor:[127,127,127],getWidth:1,getPolygonOffset:function(e){e.layerIndex;return[0,-1e4]}}),Object(I.jsx)(d.a,{id:"map-layer",data:"https://d2ad6b4ur7yvpq.cloudfront.net/naturalearth-3.3.0/ne_50m_land.geojson",filled:!0,getFillColor:[64,64,64],parameters:{depthTest:!0,cull:!0},getPolygonOffset:function(e){e.layerIndex;return[0,-1e4]}}),Object(I.jsx)(j.a,{id:"background",data:[[[-180,90],[0,90],[180,90],[180,-90],[0,-90],[-180,-90]]],getPolygon:function(e){return e},filled:!0,getFillColor:[32,32,32],parameters:{depthTest:!0,cull:!0},getPolygonOffset:function(e){e.layerIndex;return[0,1e4]}}),Object(I.jsx)(b.a,{id:"map",width:"100%",controller:!0})]})]})},U=function(e){e&&e instanceof Function&&r.e(3).then(r.bind(null,260)).then((function(t){var r=t.getCLS,n=t.getFID,o=t.getFCP,i=t.getLCP,a=t.getTTFB;r(e),n(e),o(e),i(e),a(e)}))};a.a.render(Object(I.jsx)(o.a.StrictMode,{children:Object(I.jsx)(J,{})}),document.getElementById("root")),U()}},[[199,1,2]]]);
//# sourceMappingURL=main.c5ba8005.chunk.js.map